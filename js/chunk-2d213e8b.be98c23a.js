(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d213e8b"],{af4d:function(s,a,t){"use strict";t.r(a);var e=function(){var s=this,a=s.$createElement;s._self._c;return s._m(0)},r=[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("h1",[s._v("GoogleTest安装与简单应用")]),t("h2",[s._v("引言")]),t("p",[t("a",{attrs:{href:"https://github.com/google/googletest"}},[s._v("GoogleTest")]),s._v("是Google测试团队开发的用于C++代码程序测试的测试框架，它能够在Windows、Linux和Mac多平台使用。它可以支持包含单元测试(unit tests)在内的任何测试。它具有独立性、可重复、跨平台特征，允许测试者专注于测试代码本身。")]),t("p",[s._v("本文主要演示如何在Linux系统上进行GoogleTest安装，以及使用一个简单的例子验证安装成功。")]),t("h2",[s._v("安装")]),t("p",[s._v("使用的操作系统为Ubuntu17，需要Git、Cmake和C++编译器。")]),t("ol",[t("li",[s._v("从Github上clone源文件到本机的某个文件夹中:")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("git "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("clone")]),s._v(" https://github.com/google/googletest.git\n")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("进入该文件夹，在googletest根目录下使用cmake:")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("cmake .\n")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("编译并安装，根据需要可能需要管理员权限:")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-bash"}},[s._v("make\nmake install\n")])]),t("p",[s._v("以上操作会通过g++编译googletest的头文件和库，并放在默认的目录下（/usr/local/include和/usr/local/lib）。也可以通过设置cmake调整install的位置。")]),t("h2",[s._v("使用例子验证安装")]),t("p",[s._v("本节首先编写了一个加法计算函数，并使用两个测试宏验证了该函数的正确性。")]),t("ol",[t("li",[s._v("新建文件夹作为验证gtest安装成功的测试文件根目录，并添加源代码"),t("code",{pre:!0},[s._v("main.cpp")]),s._v("和makefile如下：")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-cpp"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("//main.cpp")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-meta"}},[s._v("#"),t("span",{pre:!0,attrs:{class:"hljs-meta-keyword"}},[s._v("include")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-meta-string"}},[s._v("<gtest/gtest.h>")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-title"}},[s._v("Foo")]),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("int")]),s._v(" a, "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("int")]),s._v(" b)")])]),s._v("{\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" a+b;\n}\nTEST(FooTest, ZeroEqual){\n  ASSERT_EQ("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(");\n}\nTEST(FooTest, HandleNoneZeroInput){\n  EXPECT_EQ("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("14")]),s._v(",Foo("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("4")]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("10")]),s._v("));\n  EXPECT_QE("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("48")]),s._v(",Foo("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("30")]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("18")]),s._v("));\n}\n")])]),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-Makefile"}},[t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("# makefile")]),s._v("\nTARGET := main\nSRC = "),t("span",{pre:!0,attrs:{class:"hljs-variable"}},[s._v("$(TARGET)")]),s._v(".cpp\nOBJ = $(SRC:.cpp=.o)\n\nINC =\nLD =\n"),t("span",{pre:!0,attrs:{class:"hljs-section"}},[s._v("test:"),t("span",{pre:!0,attrs:{class:"hljs-variable"}},[s._v("$(OBJ)")])]),s._v("\n\tg++ "),t("span",{pre:!0,attrs:{class:"hljs-variable"}},[s._v("$(LD)")]),s._v(" -pthread -o $@ "),t("span",{pre:!0,attrs:{class:"hljs-variable"}},[s._v("$^")]),s._v(" -lgtest_main -lgtest\n"),t("span",{pre:!0,attrs:{class:"hljs-variable"}},[s._v("$(OBJ)")]),s._v(":"),t("span",{pre:!0,attrs:{class:"hljs-variable"}},[s._v("$(SRC)")]),s._v("\n\tg++ "),t("span",{pre:!0,attrs:{class:"hljs-variable"}},[s._v("$(INC)")]),s._v(" -o $@ -c "),t("span",{pre:!0,attrs:{class:"hljs-variable"}},[s._v("$<")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-section"}},[s._v("clean:")]),s._v("\n\trm -rf "),t("span",{pre:!0,attrs:{class:"hljs-variable"}},[s._v("$(OBJ)")]),s._v(" test\n")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("在测试文件根目录下通过"),t("code",{pre:!0},[s._v("make")]),s._v("编译并运行即可。")])])])}],l=t("2877"),n={},p=Object(l["a"])(n,e,r,!1,null,null,null);a["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d213e8b.be98c23a.js.map