{"version":3,"sources":["webpack:///./src/assets/posts/b824a382d6.md?4fe1","webpack:///./src/assets/posts/b824a382d6.md"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","_v","attrs","pre","script","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAsBH,EAAII,MAAMC,GAAO,OAAOL,EAAIM,GAAG,IACnGC,EAAkB,CAAC,WAAa,IAAIP,EAAIC,KAASC,EAAGF,EAAIG,eAAmBE,EAAGL,EAAII,MAAMC,IAAIH,EAAG,OAAOG,EAAG,UAAU,CAACA,EAAG,KAAK,CAACL,EAAIQ,GAAG,eAAeH,EAAG,IAAI,CAACA,EAAG,IAAI,CAACI,MAAM,CAAC,KAAO,uCAAuC,CAACT,EAAIQ,GAAG,+CAA+CR,EAAIQ,GAAG,+EAA+EH,EAAG,KAAK,CAACL,EAAIQ,GAAG,YAAYH,EAAG,IAAI,CAACL,EAAIQ,GAAG,yCAAyCH,EAAG,KAAK,CAACA,EAAG,KAAK,CAACL,EAAIQ,GAAG,oCAAoCH,EAAG,KAAK,CAACL,EAAIQ,GAAG,iHAAiHH,EAAG,IAAI,CAACL,EAAIQ,GAAG,4BAA4BH,EAAG,KAAK,CAACL,EAAIQ,GAAG,cAAcH,EAAG,IAAI,CAACL,EAAIQ,GAAG,sHAAsHH,EAAG,IAAI,CAACL,EAAIQ,GAAG,yGAAyGH,EAAG,IAAI,CAACI,MAAM,CAAC,KAAO,oDAAoD,CAACT,EAAIQ,GAAG,QAAQR,EAAIQ,GAAG,SAASH,EAAG,IAAI,CAACL,EAAIQ,GAAG,8EAA8EH,EAAG,MAAM,CAACK,KAAI,GAAM,CAACL,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,QAAQ,GAAG,MAAQ,wBAAwB,CAACJ,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,uCAAuCR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,SAASR,EAAIQ,GAAG,WAAWH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,kBAAkB,CAACT,EAAIQ,GAAG,aAAaR,EAAIQ,GAAG,KAAKH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,eAAeR,EAAIQ,GAAG,QAAQH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,SAASR,EAAIQ,GAAG,UAAUH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,SAASR,EAAIQ,GAAG,kCAAkCH,EAAG,IAAI,CAACL,EAAIQ,GAAG,OAAOH,EAAG,OAAO,CAACK,KAAI,GAAM,CAACV,EAAIQ,GAAG,mBAAmBR,EAAIQ,GAAG,oCAAoCH,EAAG,OAAO,CAACK,KAAI,GAAM,CAACV,EAAIQ,GAAG,YAAYR,EAAIQ,GAAG,OAAOH,EAAG,OAAO,CAACK,KAAI,GAAM,CAACV,EAAIQ,GAAG,sBAAsBR,EAAIQ,GAAG,gFAAgFH,EAAG,MAAM,CAACK,KAAI,GAAM,CAACL,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,QAAQ,GAAG,MAAQ,wBAAwB,CAACJ,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,uBAAuBR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,cAAc,CAACT,EAAIQ,GAAG,QAAQR,EAAIQ,GAAG,WAAWH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,cAAc,CAACT,EAAIQ,GAAG,gBAAgBR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,kBAAkBR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,qBAAqBR,EAAIQ,GAAG,QAAQH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,cAAc,CAACT,EAAIQ,GAAG,iBAAiBR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,WAAWR,EAAIQ,GAAG,YAAYH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,2BAA2BR,EAAIQ,GAAG,QAAQH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,cAAc,CAACT,EAAIQ,GAAG,qBAAqBR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,WAAWR,EAAIQ,GAAG,QAAQH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,kCAAkCR,EAAIQ,GAAG,QAAQH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,cAAc,CAACT,EAAIQ,GAAG,YAAYR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,iBAAiBR,EAAIQ,GAAG,WAAWH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,yBAAyBR,EAAIQ,GAAG,QAAQH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,cAAc,CAACT,EAAIQ,GAAG,sBAAsBR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,UAAUR,EAAIQ,GAAG,QAAQH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,2BAA2BR,EAAIQ,GAAG,aAAaH,EAAG,IAAI,CAACL,EAAIQ,GAAG,kBAAkBH,EAAG,OAAO,CAACK,KAAI,GAAM,CAACV,EAAIQ,GAAG,yBAAyBR,EAAIQ,GAAG,4BAA4BH,EAAG,MAAM,CAACK,KAAI,GAAM,CAACL,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,QAAQ,GAAG,MAAQ,wBAAwB,CAACJ,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,0BAA0BR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,SAASR,EAAIQ,GAAG,oBAAoBH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,cAAc,CAACT,EAAIQ,GAAG,YAAYR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,WAAWR,EAAIQ,GAAG,SAASH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,uBAAuBR,EAAIQ,GAAG,QAAQH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,cAAc,CAACT,EAAIQ,GAAG,SAASR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,WAAWR,EAAIQ,GAAG,YAAYH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,2BAA2BR,EAAIQ,GAAG,QAAQH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,cAAc,CAACT,EAAIQ,GAAG,aAAaR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,QAAQR,EAAIQ,GAAG,OAAOH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,QAAQR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,0BAA0BR,EAAIQ,GAAG,UAAUH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,SAASR,EAAIQ,GAAG,sCAAsCH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,iBAAiBR,EAAIQ,GAAG,6BAA6BH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,kBAAkB,CAACJ,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,cAAcR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,SAASR,EAAIQ,GAAG,QAAQR,EAAIQ,GAAG,SAASH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,2BAA2BR,EAAIQ,GAAG,iCAAiCH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,SAASR,EAAIQ,GAAG,iBAAiBH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,kBAAkB,CAACJ,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,cAAcR,EAAIQ,GAAG,MAAMH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,SAASR,EAAIQ,GAAG,QAAQR,EAAIQ,GAAG,SAASH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,sBAAsBR,EAAIQ,GAAG,QAAQH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,kBAAkB,CAACT,EAAIQ,GAAG,aAAaR,EAAIQ,GAAG,6BAA6BH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,SAASR,EAAIQ,GAAG,uBAAuBH,EAAG,IAAI,CAACL,EAAIQ,GAAG,qBAAqBH,EAAG,OAAO,CAACK,KAAI,GAAM,CAACV,EAAIQ,GAAG,cAAcR,EAAIQ,GAAG,+DAA+DH,EAAG,MAAM,CAACK,KAAI,GAAM,CAACL,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,QAAQ,GAAG,MAAQ,wBAAwB,CAACJ,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,iBAAiB,CAACT,EAAIQ,GAAG,SAASR,EAAIQ,GAAG,cAAcH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,kBAAkB,CAACT,EAAIQ,GAAG,cAAcR,EAAIQ,GAAG,mBAAmBH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,cAAgBR,EAAIQ,GAAG,uDAAuDH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,gBAAgB,CAACT,EAAIQ,GAAG,YAAcR,EAAIQ,GAAG,OAAOH,EAAG,OAAO,CAACK,KAAI,EAAKD,MAAM,CAAC,MAAQ,kBAAkB,CAACT,EAAIQ,GAAG,cAAcR,EAAIQ,GAAG,wC,YCAz4NG,EAAS,GAKTC,EAAY,eACdD,EACAZ,EACAQ,GACA,EACA,KACA,KACA,MAIa,aAAAK,E","file":"js/chunk-2d0cc649.ab28bb64.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('h1',[_vm._v(\"AWS S3 初探\")]),_c('p',[_c('a',{attrs:{\"href\":\"https://amazonaws-china.com/cn/s3/\"}},[_vm._v(\"Amazon Simple Storage Service (Amazon S3)\")]),_vm._v(\" 是一种对象存储服务，提供行业领先的可扩展性、数据可用性、安全性和性能。数据以对象的形式存储在名为“存储桶”的资源中，单个对象大小的上限为5TB。\")]),_c('h2',[_vm._v(\"费用计算方面\")]),_c('p',[_vm._v(\"AWS S3的费用主要由两部分构成：存储产生费用和数据上下行产生费用。\")]),_c('ul',[_c('li',[_vm._v(\"根据文件所在的存储层级不同，每存储1G将产生不同的存储费用。\")]),_c('li',[_vm._v(\"根据文件传入传出大小，产生一定的传输费用。目前文件上传费用每 GB 0.00 USD，下载费用每月有 1 GB的费用豁免，传输数据量在 1 GB 到 5 TB之间时，每 GB 产生 0.09 USD的传出费用。\")])]),_c('p',[_vm._v(\"(其他关于S3的介绍有了相关研究再进行更新)\")]),_c('h2',[_vm._v(\"公开文件下载端口\")]),_c('p',[_vm._v(\"对于将AWS S3作为文件下载的仓库需求而言，想要使其可以被公开地下载，还需要费一番功夫。出于安全性考虑，默认的AWS S3中的文件都是非公开的。可以通过修改该设置达到公开文件下载链接，但也可以使用一种更安全的方式：预签名。\")]),_c('p',[_vm._v(\"预签名类似于，使用有权限下载文件的账号访问AWS S3，获取临时的下载链接，而后再将该链接传递给用户，从而达到文件的临时公开下载目的。接下来讲讲使用nodejs作为后端时如何进行预签名，相关API可以在\"),_c('a',{attrs:{\"href\":\"https://amazonaws-china.com/cn/sdk-for-node-js/\"}},[_vm._v(\"这里\")]),_vm._v(\"找到。\")]),_c('p',[_vm._v(\"同样基于安全性考虑，最好不是使用根用户，而是在IMA中专门注册一个用户用来预签名，在此不对具体操作进行赘述。而后在nodejs中实例化S3服务：\")]),_c('pre',{pre:true},[_c('code',{pre:true,attrs:{\"v-pre\":\"\",\"class\":\"language-javascript\"}},[_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"// entry js: index.js, app.js etc\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"var\")]),_vm._v(\" AWS = \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-built_in\"}},[_vm._v(\"require\")]),_vm._v(\"(\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'aws-sdk'\")]),_vm._v(\");\\n\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"var\")]),_vm._v(\" s3 = \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"new\")]),_vm._v(\" AWS.S3(configs.aws.s3);\\n\")])]),_c('p',[_vm._v(\"其中，\"),_c('code',{pre:true},[_vm._v(\"config.aws.s3\")]),_vm._v(\"是一个参数json，在我的应用中，包含如下参数。比较特别的两项有\"),_c('code',{pre:true},[_vm._v(\"region\")]),_vm._v(\"字段和\"),_c('code',{pre:true},[_vm._v(\"signatureVersion\")]),_vm._v(\"字段，他们分别的作用是指定发送请求给谁，以及签名版本。之所以指定签名版本是因为作为默认的'v2'版本是处于废弃状态的版本，部分region并不支持。\")]),_c('pre',{pre:true},[_c('code',{pre:true,attrs:{\"v-pre\":\"\",\"class\":\"language-javascript\"}},[_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"// configs.aws.s3\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"s3\")]),_vm._v(\": {\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"apiVersion\")]),_vm._v(\": \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'2006-03-01'\")]),_vm._v(\", \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"/*api version*/\")]),_vm._v(\"\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"accessKeyId\")]),_vm._v(\": \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'xxx'\")]),_vm._v(\",       \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"/*user's access key*/\")]),_vm._v(\"\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"secretAccessKey\")]),_vm._v(\": \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'xxx'\")]),_vm._v(\",   \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"/*user's secret access key*/\")]),_vm._v(\"\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"region\")]),_vm._v(\": \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'ap-east-1'\")]),_vm._v(\",      \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"/*bucket's region*/\")]),_vm._v(\"\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"signatureVersion\")]),_vm._v(\": \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'v4'\")]),_vm._v(\"    \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"/*signature version*/\")]),_vm._v(\"\\n}\\n\")])]),_c('p',[_vm._v(\"S3实例化后，就可以通过调用\"),_c('code',{pre:true},[_vm._v(\"getSignedUrlPromise\")]),_vm._v(\"API来进行预签名。一个典型的使用样例如下。\")]),_c('pre',{pre:true},[_c('code',{pre:true,attrs:{\"v-pre\":\"\",\"class\":\"language-javascript\"}},[_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"// signedUrl request\")]),_vm._v(\"\\n\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"var\")]),_vm._v(\" params = { \\n  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"Bucket\")]),_vm._v(\": \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'xxx'\")]),_vm._v(\",    \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"/* bucket name */\")]),_vm._v(\"\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"Key\")]),_vm._v(\": \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'xxx'\")]),_vm._v(\",       \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"/* key to the file */\")]),_vm._v(\"\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-attr\"}},[_vm._v(\"Expires\")]),_vm._v(\": \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-number\"}},[_vm._v(\"10\")]),_vm._v(\" * \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-number\"}},[_vm._v(\"60\")]),_vm._v(\"  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"/* expire time(s) */\")]),_vm._v(\"\\n};\\n\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"var\")]),_vm._v(\" promise = s3.getSignedUrlPromise(\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"'getObject'\")]),_vm._v(\", params);\\npromise.then(\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-function\"}},[_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"function\")]),_vm._v(\" (\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-params\"}},[_vm._v(\"url\")]),_vm._v(\") \")]),_vm._v(\"{\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"// get url successful\")]),_vm._v(\"\\n  res.send({ url }).status(\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-number\"}},[_vm._v(\"200\")]),_vm._v(\").end();\\n}, \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-function\"}},[_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"function\")]),_vm._v(\" (\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-params\"}},[_vm._v(\"err\")]),_vm._v(\") \")]),_vm._v(\"{\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-comment\"}},[_vm._v(\"// error handing\")]),_vm._v(\"\\n  \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-built_in\"}},[_vm._v(\"console\")]),_vm._v(\".log(err);\\n  res.status(\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-number\"}},[_vm._v(\"500\")]),_vm._v(\").end();\\n});\\n\")])]),_c('p',[_vm._v(\"由于跨域访问的问题，因此不直接使用\"),_c('code',{pre:true},[_vm._v(\"redirect\")]),_vm._v(\"，而是将url发送给前端，再由前端使用添加iframe元素等方式直接向S3服务器发送下载文件请求。该方法样例如下。\")]),_c('pre',{pre:true},[_c('code',{pre:true,attrs:{\"v-pre\":\"\",\"class\":\"language-javascript\"}},[_c('span',{pre:true,attrs:{\"class\":\"hljs-keyword\"}},[_vm._v(\"var\")]),_vm._v(\" elemIF = \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-built_in\"}},[_vm._v(\"document\")]),_vm._v(\".createElement(\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"\\\"iframe\\\"\")]),_vm._v(\");\\nelemIF.src = data.url;\\nelemIF.style.display = \"),_c('span',{pre:true,attrs:{\"class\":\"hljs-string\"}},[_vm._v(\"\\\"none\\\"\")]),_vm._v(\";\\n\"),_c('span',{pre:true,attrs:{\"class\":\"hljs-built_in\"}},[_vm._v(\"document\")]),_vm._v(\".body.appendChild(elemIF);\\n\")])])])}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./b824a382d6.md?vue&type=template&id=06ee8912&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}